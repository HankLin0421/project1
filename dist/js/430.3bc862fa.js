"use strict";(self["webpackChunkproject"]=self["webpackChunkproject"]||[]).push([[430],{1430:function(t,e,l){l.r(e),l.d(e,{default:function(){return X}});l(4114);var n=l(6768),o=l(4232),c=l(5130),a=l(9325),s=l(4373),i=l(144),r=l(782);const u=t=>((0,n.Qi)("data-v-34cba1c8"),t=t(),(0,n.jt)(),t),d={class:"container-fluid"},p={class:"row justify-content-md-center"},k={key:0,class:"mt-5 col-lg-10 col-md-10 col-sm-12 col-12 text-center"},h=u((()=>(0,n.Lk)("h2",{class:"mt-5"},"購物車空空如也 ! 趕緊購物去吧 !",-1))),m={class:"turn-down"},L={class:"cart-plus"},g={key:1,class:"col-lg-10 col-md-10 col-sm-12 col-12"},v=u((()=>(0,n.Lk)("h1",null,"購物車",-1))),f={class:"table-responsive text-center"},_={class:"table table-hover align-middle"},b=u((()=>(0,n.Lk)("thead",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{scope:"col",width:"15%"},"順序"),(0,n.Lk)("th",{scope:"col",width:"5%",class:"d-none d-lg-table-cell"}," 圖片 "),(0,n.Lk)("th",{scope:"col",width:"20%"},"名稱"),(0,n.Lk)("th",{scope:"col",width:"15%"},"價格"),(0,n.Lk)("th",{scope:"col",width:"17%"},"數量"),(0,n.Lk)("th",{scope:"col",width:"15%"},"小計"),(0,n.Lk)("th",{scope:"col",width:"18%"},"下次再買")])],-1))),C=["textContent"],y={class:"d-none d-lg-table-cell"},w=["src","alt","title"],x=["textContent"],S=["textContent"],q=["onUpdate:modelValue","onChange"],E=["textContent"],I=["onClick"],j=["textContent"];var J={__name:"h_shoppingcart",setup(t){const e=(0,r.Pj)(),u="http://localhost/project/select.php",J=(0,i.KR)(!1),N=(0,i.KR)([]),O=(0,n.EW)((()=>{let t=0;return N.value.forEach((e=>{t+=e.p_price*e.qty})),t}));async function X(){let t=localStorage.getItem("cartlist");if("[]"==t)J.value=!0;else{let e=JSON.parse(t);for(let t of e)await s.A.get(u,{params:{do:"cart",p_id:t.p_id,qty:t.qty}}).then((t=>{N.value.push(t.data)}))}}function A(t,e){let l=localStorage.getItem("cartlist"),n=JSON.parse(l);for(let o of n)o.p_id==t&&(o.qty=e);localStorage.setItem("cartlist",JSON.stringify(n))}function F(t){let l=localStorage.getItem("cartlist"),n=JSON.parse(l);n.forEach(((e,l)=>{e.p_id==t&&(n.splice(l,1),N.value.splice(l,1))})),0==N.value.length&&(J.value=!0),e.commit("qtyMinus"),localStorage.setItem("cartlist",JSON.stringify(n))}function K(){const t=localStorage.getItem("isLogin");t?a.A.push({name:"checkout"}):(alert("請先登入"),a.A.push({name:"login"}))}return X(),window.scrollTo(0,0),(t,e)=>{const a=(0,n.g2)("font-awesome-icon");return(0,n.uX)(),(0,n.CE)("div",d,[(0,n.Lk)("div",p,[1==J.value?((0,n.uX)(),(0,n.CE)("div",k,[h,(0,n.Lk)("div",m,[(0,n.bF)(a,{class:"w-100 h-100",icon:["fas","turn-down"]})]),(0,n.Lk)("div",L,[(0,n.bF)(a,{class:"w-100 h-100",icon:["fas","cart-plus"]})])])):((0,n.uX)(),(0,n.CE)("div",g,[v,(0,n.Lk)("div",f,[(0,n.Lk)("table",_,[b,(0,n.Lk)("tbody",null,[((0,n.uX)(!0),(0,n.CE)(n.FK,null,(0,n.pI)(N.value,((t,e)=>((0,n.uX)(),(0,n.CE)("tr",{key:t.p_id},[(0,n.Lk)("th",{scope:"row",textContent:(0,o.v_)(e+1)},null,8,C),(0,n.Lk)("td",y,[(0,n.Lk)("img",{class:"img-fluid",src:l(290)(`./${t.p_image}`),alt:t.p_name,title:t.p_name},null,8,w)]),(0,n.Lk)("td",{textContent:(0,o.v_)(t.p_name)},null,8,x),(0,n.Lk)("td",{textContent:(0,o.v_)(t.p_price)},null,8,S),(0,n.Lk)("td",null,[(0,n.bo)((0,n.Lk)("input",{class:"form-control",type:"number",min:"1",max:"49",required:"","onUpdate:modelValue":e=>t.qty=e,onChange:e=>A(t.p_id,t.qty)},null,40,q),[[c.Jo,t.qty]])]),(0,n.Lk)("td",{class:"text-danger",textContent:(0,o.v_)(t.qty*t.p_price)},null,8,E),(0,n.Lk)("td",null,[(0,n.Lk)("button",{type:"button",class:"btn btn-danger",onClick:e=>F(t.p_id)}," 刪除 ",8,I)])])))),128))]),(0,n.Lk)("tfoot",null,[(0,n.Lk)("tr",null,[(0,n.Lk)("th",{colspan:"7",class:"text-danger",textContent:(0,o.v_)(`總計: ${O.value}`)},null,8,j)])])]),(0,n.Lk)("button",{type:"button",class:"btn btn-success fs-5",onClick:e[0]||(e[0]=t=>K())}," 結帳 ")])]))])])}}},N=l(1241);const O=(0,N.A)(J,[["__scopeId","data-v-34cba1c8"]]);var X=O}}]);
//# sourceMappingURL=430.3bc862fa.js.map