{"version":3,"file":"js/430.3bc862fa.js","mappings":"q2CAsHA,MAAMA,GAAQC,EAAAA,EAAAA,MACRC,EAAYC,sCACZC,GAAYC,EAAAA,EAAAA,KAAI,GAChBC,GAAWD,EAAAA,EAAAA,IAAI,IACfE,GAAWC,EAAAA,EAAAA,KAAS,KACxB,IAAIC,EAAQ,EAIZ,OAHAH,EAASI,MAAMC,SAASC,IACtBH,GAASG,EAAKC,QAAUD,EAAKE,GAAG,IAE3BL,CAAK,IAIdM,eAAeC,IACb,IAAIC,EAAWC,aAAaC,QAAQ,YACpC,GAAgB,MAAZF,EACFb,EAAUM,OAAQ,MACb,CACL,IAAIU,EAAgBC,KAAKC,MAAML,GAC/B,IAAK,IAAIL,KAAQQ,QACTG,EAAAA,EACHC,IAAItB,EAAW,CACduB,OAAQ,CACNC,GAAI,OACJC,KAAMf,EAAKe,KACXb,IAAKF,EAAKE,OAGbc,MAAMC,IACLvB,EAASI,MAAMoB,KAAKD,EAAIE,KAAK,GAGrC,CACF,CACA,SAASC,EAAUC,EAAInB,GACrB,IAAIG,EAAWC,aAAaC,QAAQ,YAChCC,EAAgBC,KAAKC,MAAML,GAC/B,IAAK,IAAIL,KAAQQ,EACXR,EAAKe,MAAQM,IACfrB,EAAKE,IAAMA,GAGfI,aAAagB,QAAQ,WAAYb,KAAKc,UAAUf,GAClD,CACA,SAASgB,EAAQH,GACf,IAAIhB,EAAWC,aAAaC,QAAQ,YAChCC,EAAgBC,KAAKC,MAAML,GAC/BG,EAAcT,SAAQ,CAACC,EAAMyB,KACvBzB,EAAKe,MAAQM,IACfb,EAAckB,OAAOD,EAAO,GAC5B/B,EAASI,MAAM4B,OAAOD,EAAO,GAC/B,IAE2B,GAAzB/B,EAASI,MAAM6B,SACjBnC,EAAUM,OAAQ,GAEpBV,EAAMwC,OAAO,YAEbtB,aAAagB,QAAQ,WAAYb,KAAKc,UAAUf,GAClD,CACA,SAASqB,IACP,MAAMC,EAAUxB,aAAaC,QAAQ,WAChCuB,EAIHC,EAAAA,EAAOb,KAAK,CAAEc,KAAM,cAHpBC,MAAM,QACNF,EAAAA,EAAOb,KAAK,CAAEc,KAAM,UAIxB,C,OAxDA5B,IAyDA8B,OAAOC,SAAS,EAAG,G,k8CCrLnB,MAAMC,GAA2B,OAAgB,EAAQ,CAAC,CAAC,YAAY,qBAEvE,O","sources":["webpack://project/./src/views/h_shoppingcart.vue","webpack://project/./src/views/h_shoppingcart.vue?fcb6"],"sourcesContent":["<template>\n  <div class=\"container-fluid\">\n    <div class=\"row justify-content-md-center\">\n      <div\n        v-if=\"emptyCart == true\"\n        class=\"mt-5 col-lg-10 col-md-10 col-sm-12 col-12 text-center\"\n      >\n        <h2 class=\"mt-5\">購物車空空如也 ! 趕緊購物去吧 !</h2>\n        <div class=\"turn-down\">\n          <font-awesome-icon class=\"w-100 h-100\" :icon=\"['fas', 'turn-down']\" />\n        </div>\n        <div class=\"cart-plus\">\n          <font-awesome-icon class=\"w-100 h-100\" :icon=\"['fas', 'cart-plus']\" />\n        </div>\n      </div>\n      <div v-else class=\"col-lg-10 col-md-10 col-sm-12 col-12\">\n        <h1>購物車</h1>\n        <!-- <a href=\"#\" id=\"btn01\" name=\"btn01\" class=\"btn btn-primary\"\n              >繼續購物</a\n            >\n            <button\n              type=\"button\"\n              class=\"btn btn-info\"\n              onclick=\"window.history.go(-1);\"\n            >\n              回到上一頁\n            </button>\n            <button type=\"button\" class=\"btn btn-success\" @click=\"list\">\n              清空購物車\n            </button>\n            <a href=\"#\" class=\"btn btn-warning\">前往結帳</a> -->\n        <div class=\"table-responsive text-center\">\n          <table class=\"table table-hover align-middle\">\n            <thead>\n              <tr>\n                <th scope=\"col\" width=\"15%\">順序</th>\n                <th scope=\"col\" width=\"5%\" class=\"d-none d-lg-table-cell\">\n                  圖片\n                </th>\n                <th scope=\"col\" width=\"20%\">名稱</th>\n                <th scope=\"col\" width=\"15%\">價格</th>\n                <th scope=\"col\" width=\"17%\">數量</th>\n                <th scope=\"col\" width=\"15%\">小計</th>\n                <th scope=\"col\" width=\"18%\">下次再買</th>\n              </tr>\n            </thead>\n            <tbody>\n              <template\n                v-for=\"(product, index) in cartlist\"\n                :key=\"product.p_id\"\n              >\n                <tr>\n                  <th scope=\"row\" v-text=\"index + 1\"></th>\n                  <td class=\"d-none d-lg-table-cell\">\n                    <img\n                      class=\"img-fluid\"\n                      :src=\"require(`@/assets/${product.p_image}`)\"\n                      :alt=\"product.p_name\"\n                      :title=\"product.p_name\"\n                    />\n                  </td>\n                  <td v-text=\"product.p_name\"></td>\n                  <td v-text=\"product.p_price\"></td>\n                  <td>\n                    <input\n                      class=\"form-control\"\n                      type=\"number\"\n                      min=\"1\"\n                      max=\"49\"\n                      required\n                      v-model=\"product.qty\"\n                      @change=\"ChangeQty(product.p_id, product.qty)\"\n                    />\n                  </td>\n                  <td\n                    class=\"text-danger\"\n                    v-text=\"product.qty * product.p_price\"\n                  ></td>\n                  <td>\n                    <button\n                      type=\"button\"\n                      class=\"btn btn-danger\"\n                      @click=\"DelCart(product.p_id)\"\n                    >\n                      刪除\n                    </button>\n                  </td>\n                </tr>\n              </template>\n            </tbody>\n            <tfoot>\n              <tr>\n                <th\n                  colspan=\"7\"\n                  class=\"text-danger\"\n                  v-text=\"`總計: ${alltotal}`\"\n                ></th>\n              </tr>\n            </tfoot>\n          </table>\n          <button\n            type=\"button\"\n            class=\"btn btn-success fs-5\"\n            @click=\"checkOut()\"\n          >\n            結帳\n          </button>\n        </div>\n      </div>\n    </div>\n  </div>\n</template>\n\n<script setup>\nimport router from \"@/router\";\nimport axios from \"axios\";\nimport { computed, ref } from \"vue\";\nimport { useStore } from \"vuex\";\nconst store = useStore();\nconst selecturl = process.env.VUE_APP_API_URL;\nconst emptyCart = ref(false);\nconst cartlist = ref([]);\nconst alltotal = computed(() => {\n  let total = 0;\n  cartlist.value.forEach((item) => {\n    total += item.p_price * item.qty;\n  });\n  return total;\n});\n// const clearstr = () => localStorage.removeItem(\"cartlist\");\nGetCart();\nasync function GetCart() {\n  let CartList = localStorage.getItem(\"cartlist\");\n  if (CartList == \"[]\") {\n    emptyCart.value = true;\n  } else {\n    let CartListArray = JSON.parse(CartList);\n    for (let item of CartListArray) {\n      await axios\n        .get(selecturl, {\n          params: {\n            do: \"cart\",\n            p_id: item.p_id,\n            qty: item.qty,\n          },\n        })\n        .then((res) => {\n          cartlist.value.push(res.data);\n        });\n    }\n  }\n}\nfunction ChangeQty(id, qty) {\n  let CartList = localStorage.getItem(\"cartlist\");\n  let CartListArray = JSON.parse(CartList);\n  for (let item of CartListArray) {\n    if (item.p_id == id) {\n      item.qty = qty;\n    }\n  }\n  localStorage.setItem(\"cartlist\", JSON.stringify(CartListArray));\n}\nfunction DelCart(id) {\n  let CartList = localStorage.getItem(\"cartlist\");\n  let CartListArray = JSON.parse(CartList);\n  CartListArray.forEach((item, index) => {\n    if (item.p_id == id) {\n      CartListArray.splice(index, 1);\n      cartlist.value.splice(index, 1);\n    }\n  });\n  if (cartlist.value.length == 0) {\n    emptyCart.value = true;\n  }\n  store.commit(\"qtyMinus\");\n\n  localStorage.setItem(\"cartlist\", JSON.stringify(CartListArray));\n}\nfunction checkOut() {\n  const isLogin = localStorage.getItem(\"isLogin\");\n  if (!isLogin) {\n    alert(\"請先登入\");\n    router.push({ name: \"login\" });\n  } else {\n    router.push({ name: \"checkout\" });\n  }\n}\nwindow.scrollTo(0, 0);\n</script>\n<style scoped>\n.turn-down {\n  margin: 5% auto 1%;\n  width: 10%;\n  height: 10%;\n}\n.cart-plus {\n  margin: 0 auto;\n  width: 40%;\n  height: 20%;\n}\n</style>\n","import script from \"./h_shoppingcart.vue?vue&type=script&setup=true&lang=js\"\nexport * from \"./h_shoppingcart.vue?vue&type=script&setup=true&lang=js\"\n\nimport \"./h_shoppingcart.vue?vue&type=style&index=0&id=34cba1c8&scoped=true&lang=css\"\n\nimport exportComponent from \"../../node_modules/vue-loader/dist/exportHelper.js\"\nconst __exports__ = /*#__PURE__*/exportComponent(script, [['__scopeId',\"data-v-34cba1c8\"]])\n\nexport default __exports__"],"names":["store","useStore","selecturl","process","emptyCart","ref","cartlist","alltotal","computed","total","value","forEach","item","p_price","qty","async","GetCart","CartList","localStorage","getItem","CartListArray","JSON","parse","axios","get","params","do","p_id","then","res","push","data","ChangeQty","id","setItem","stringify","DelCart","index","splice","length","commit","checkOut","isLogin","router","name","alert","window","scrollTo","__exports__"],"sourceRoot":""}